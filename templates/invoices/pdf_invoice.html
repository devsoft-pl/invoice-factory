{% load static %}
<style>
    @font-face {
        font-family: "Open Sans"; src: url("static/OpenSans-Regular.ttf");
    }
    * {
        font-family: "Open Sans";
    }
    h1   {color: blue;}
    h2   {color: blue;}
    p    {color: blue;}
    b    {color: gray;}
    .items {
        border:1px solid black;
        border-collapse: collapse;
        text-align: center;
    }
    .item-description {
        text-align: left;
        margin-left: 5px;
    }
    .items-summary {
        border:1px solid black;
        border-collapse: collapse;
    }
    .items td {
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .summary-title {
        text-align: left;
        margin-left: 5px;
    }
</style>
<h1>Faktura</h1>
<p>Nr {{ invoice.invoice_number }}</p>

<table style="width:100%">
    <tr>
        <td><b>SPRZEDAWCA: </b>{{ company.name }}</td>
        <td><b>NABYWCA: </b>{{ invoice.company }}</td>
    </tr>
    <tr>
        <td><b>ADRES: </b>{{ company.address }}</td>
        <td><b>ADRES: </b>{{ invoice.company.address }}</td>
    </tr>
    <tr>
        <td>{{ company.zip_code }} {{ company.city }}, {{ company.country }}</td>
        <td>{{ invoice.company.zip_code }} {{ invoice.company.city }}, {{ invoice.company.country }}</td>
    </tr>
    <tr>
        <td><b>NIP: </b>{{ company.nip }}</td>
        <td><b>NIP: </b>{{ invoice.company.nip }}</td>
    </tr>
</table>

<hr>

<table style="width:100%">
    <tr>
        <th></th>
        <th></th>
    </tr>
    <tr>
        <td><b>DATA WYSTAWIENIA: </b>{{ invoice.create_date }}</td>
        <td><b>SPOSÓB PŁATNOŚCI: </b>{{ invoice.get_payment_method_display }}</td>
    </tr>
    <tr>
        <td><b>DATA SPRZEDAŻY: </b>{{ invoice.sale_date }}</td>
        <td><b>WALUTA: </b>{{ invoice.currency }}</td>
    </tr>
    <tr>
        <td><b>TERMIN PŁATNOŚCI </b>{{ invoice.payment_date }}</td>
        <td><b>NUMER KONTA: </b>{{ invoice.account_number }}</td>
    </tr>

</table>

<h2>Pozycje faktury</h2>

{% if items %}
    <table style="width:100%" class="items">
        <tr>
            <th style="width:5%">Lp.</th>
            <th style="width:50%">Nazwa towaru lub uslugi</th>
            <th>PKWiU</th>
            <th>Ilość</th>
            <th>Cena netto</th>
            <th>Wartość netto</th>
            <th>Stawka VAT</th>
        </tr>
        {% for item in items %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td class="item-description">{{ item.name }}</td>
                <td>{{ item.pkwiu }}</td>
                <td>{{ item.amount }}</td>
                <td>{{ item.net_price|floatformat:"2g" }}</td>
                <td>{{ item.net_amount|floatformat:"2g" }}</td>
                <td >{{ item.vat }} %</td>
            </tr>
        {% endfor %}
        <tr>
            <td colspan="7" class="summary-title" >Podsumowanie: </td>
        </tr>
        <tr>
            <td colspan="3" class="summary-title" ></td>
            <th>Stawka VAT</th>
            <th>Wartość netto</th>
            <th>VAT</th>
            <th>Wartość brutto</th>
        </tr>
        <tr>
            <td colspan="3" class="summary-title" >Razem </td>
            {% for item in items %}
                <td>{{ item.vat }} %</td>
            {% endfor %}
            <td>{{ invoice.net_amount|floatformat:"2g"}}</td>
            <td>{{ invoice.tax_amount|floatformat:"2g" }}</td>
            <td>{{ invoice.gross_amount|floatformat:"2g" }}</td>
        </tr>
    </table>
{% else %}
    <p>Brak pozycji</p>
{% endif %}

<h3 style="text-align: right">Zapłacono: 0.00 {{ invoice.currency }}</h3>
<h3 style="text-align: right">Pozostało do zapłaty: {{ invoice.gross_amount|floatformat:"2g" }} {{ invoice.currency }}</h3>
<h3 style="text-align: right">Słownie: {{ gross_whole_amount }} złotych i {{ gross_frac_amount }} groszy</h3>
<h1 style="text-align: right"><u>Razem do zapłaty: {{ invoice.gross_amount }} {{ invoice.currency }}</u></h1>

<hr>

{% if items %}
    <table style="width:100%">
        <tr>
            <th>imię, nazwisko i podpis osoby upoważnionej do odebrania dokumentu</th>
            <th>imię, nazwisko i podpis osoby upoważnionej do wystawienia dokumentu</th>
        </tr>
{% endif %}










